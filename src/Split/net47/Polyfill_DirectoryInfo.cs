// <auto-generated />
#pragma warning disable
#pragma warning disable
// ReSharper disable RedundantUsingDirective
// ReSharper disable UnusedMember.Global
// DirectoryInfo methods with EnumerationOptions were added in .NET Core 2.1
namespace Polyfills;
using System;
using System.Collections.Generic;
using System.IO;
using System.Linq;
static partial class Polyfill
{
	/// <summary>
	/// Returns an enumerable collection of file information that matches a specified search pattern and enumeration options.
	/// </summary>
	public static IEnumerable<FileInfo> EnumerateFiles(this DirectoryInfo target, string searchPattern, EnumerationOptions enumerationOptions) =>
		ApplyEnumerationOptions(
			target.EnumerateFiles(searchPattern, ToSearchOption(enumerationOptions)),
			enumerationOptions);
	/// <summary>
	/// Returns an enumerable collection of directory information that matches a specified search pattern and enumeration options.
	/// </summary>
	public static IEnumerable<DirectoryInfo> EnumerateDirectories(this DirectoryInfo target, string searchPattern, EnumerationOptions enumerationOptions) =>
		ApplyEnumerationOptions(
			target.EnumerateDirectories(searchPattern, ToSearchOption(enumerationOptions)),
			enumerationOptions);
	/// <summary>
	/// Returns an enumerable collection of file system information that matches a specified search pattern and enumeration options.
	/// </summary>
	public static IEnumerable<FileSystemInfo> EnumerateFileSystemInfos(this DirectoryInfo target, string searchPattern, EnumerationOptions enumerationOptions) =>
		ApplyEnumerationOptions(
			target.EnumerateFileSystemInfos(searchPattern, ToSearchOption(enumerationOptions)),
			enumerationOptions);
	/// <summary>
	/// Returns an array of files that match a search pattern and enumeration options.
	/// </summary>
	public static FileInfo[] GetFiles(this DirectoryInfo target, string searchPattern, EnumerationOptions enumerationOptions) =>
		target.EnumerateFiles(searchPattern, enumerationOptions).ToArray();
	/// <summary>
	/// Returns an array of subdirectories that match a search pattern and enumeration options.
	/// </summary>
	public static DirectoryInfo[] GetDirectories(this DirectoryInfo target, string searchPattern, EnumerationOptions enumerationOptions) =>
		target.EnumerateDirectories(searchPattern, enumerationOptions).ToArray();
	/// <summary>
	/// Returns an array of file system entries that match a search pattern and enumeration options.
	/// </summary>
	public static FileSystemInfo[] GetFileSystemInfos(this DirectoryInfo target, string searchPattern, EnumerationOptions enumerationOptions) =>
		target.EnumerateFileSystemInfos(searchPattern, enumerationOptions).ToArray();
	static IEnumerable<T> ApplyEnumerationOptions<T>(IEnumerable<T> source, EnumerationOptions options)
		where T : FileSystemInfo
	{
		foreach (var item in source)
		{
			FileAttributes attributes;
			try
			{
				attributes = item.Attributes;
			}
			catch (Exception) when (options.IgnoreInaccessible)
			{
				continue;
			}
			if ((attributes & options.AttributesToSkip) != 0)
			{
				continue;
			}
			yield return item;
		}
	}
}
