// <auto-generated />
#pragma warning disable

namespace Polyfills;

using System;
using System.IO;
using System.Threading;
using System.Threading.Tasks;

static partial class Polyfill
{
#if FeatureMemory
    /// <summary>
    /// Reads a sequence of bytes from the current stream and advances the position within the stream by the number of bytes read.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.io.stream.read?view=net-10.0#system-io-stream-read(system-span((system-byte)))
    public static int Read(this Stream target, Span<byte> buffer)
    {
        byte[] sharedBuffer = new byte[buffer.Length];
        int numRead = target.Read(sharedBuffer, 0, buffer.Length);
        if ((uint)numRead > (uint)buffer.Length)
        {
            throw new IOException("StreamTooLong");
        }

        new ReadOnlySpan<byte>(sharedBuffer, 0, numRead).CopyTo(buffer);
        return numRead;
    }
#endif

#if FeatureValueTask
#endif
#if FeatureMemory
#if FeatureValueTask
#endif
#endif
}