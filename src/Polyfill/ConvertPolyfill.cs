// <auto-generated />

#pragma warning disable

namespace Polyfills;

using System;
using System.Text;
using System.ComponentModel;
using System.Collections.Generic;
using System.Diagnostics;
using System.Diagnostics.CodeAnalysis;

[ExcludeFromCodeCoverage]
[DebuggerNonUserCode]
#if PolyPublic
public
#endif
static partial class ConvertPolyfill
{
    /// <summary>
    /// Converts a subset of an array of 8-bit unsigned integers to its equivalent string representation that is encoded with uppercase hex characters.
    /// Parameters specify the subset as an offset in the input array and the number of elements in the array to convert.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.tohexstring#system-convert-tohexstring(system-byte()-system-int32-system-int32)
    public static string ToHexString(byte[] inArray, int offset, int length)
#if NET5_0_OR_GREATER
        => Convert.ToHexString(inArray, offset, length);
#else
    {
        if (length < 0)
            throw new ArgumentOutOfRangeException(nameof(length));
        if (offset < 0)
            throw new ArgumentOutOfRangeException(nameof(offset));
        if (offset > (inArray.Length - length))
            throw new ArgumentOutOfRangeException(nameof(offset));

        var builder = new StringBuilder();

        var end = length + offset;
        for (int i = offset; i < end; i++)
        {
            var item = inArray[i];
            builder.Append(item.ToString("X2"));
        }

        return builder.ToString();
    }
#endif

    /// <summary>
    /// Converts a subset of an array of 8-bit unsigned integers to its equivalent string representation that is encoded with lowercase hex characters.
    /// Parameters specify the subset as an offset in the input array and the number of elements in the array to convert.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.tohexstringlower#system-convert-tohexstringlower(system-byte()-system-int32-system-int32)
    public static string ToHexStringLower(byte[] inArray, int offset, int length)
#if NET9_0_OR_GREATER
        => Convert.ToHexStringLower(inArray, offset, length);
#else
    {
        if (length < 0)
            throw new ArgumentOutOfRangeException(nameof(length));
        if (offset < 0)
            throw new ArgumentOutOfRangeException(nameof(offset));
        if (offset > (inArray.Length - length))
            throw new ArgumentOutOfRangeException(nameof(offset));

        var builder = new StringBuilder();

        var end = length + offset;
        for (int i = offset; i < end; i++)
        {
            var item = inArray[i];
            builder.Append(item.ToString("x2"));
        }

        return builder.ToString();
    }
#endif

    /// <summary>
    /// Converts an array of 8-bit unsigned integers to its equivalent string representation that is encoded with uppercase hex characters.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.tohexstring#system-convert-tohexstring(system-byte())
    public static string ToHexString(byte[] inArray) =>
#if NET5_0_OR_GREATER
        Convert.ToHexString(inArray);
#else
        ConvertPolyfill.ToHexString(inArray, 0, inArray.Length);
#endif

    /// <summary>
    /// Converts an array of 8-bit unsigned integers to its equivalent string representation that is encoded with lowercase hex characters.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.tohexstringlower#system-convert-tohexstringlower(system-byte())
    public static string ToHexStringLower(byte[] inArray) =>
#if NET9_0_OR_GREATER
        Convert.ToHexStringLower(inArray);
#else
        ConvertPolyfill.ToHexStringLower(inArray, 0, inArray.Length);
#endif

#if FeatureMemory
    /// <summary>
    /// Converts a span of 8-bit unsigned integers to its equivalent string representation that is encoded with uppercase hex characters.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.tohexstring#system-convert-tohexstring(system-readonlyspan((system-byte)))
    public static string ToHexString(ReadOnlySpan<byte> bytes) =>
#if NET5_0_OR_GREATER
        Convert.ToHexString(bytes);
#else
        ConvertPolyfill.ToHexString(bytes.ToArray());
#endif

    /// <summary>
    /// Converts a span of 8-bit unsigned integers to its equivalent string representation that is encoded with lowercase hex characters.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.tohexstringlower#system-convert-tohexstringlower(system-readonlyspan((system-byte)))
    public static string ToHexStringLower(ReadOnlySpan<byte> bytes) =>
#if NET9_0_OR_GREATER
        Convert.ToHexStringLower(bytes);
#else
        ConvertPolyfill.ToHexStringLower(bytes.ToArray());
#endif

    /// <summary>
    /// Converts a span of 8-bit unsigned integers to its equivalent span representation that is encoded with uppercase hex characters.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.trytohexstring
    public static bool TryToHexString(ReadOnlySpan<byte> source, Span<char> destination, out int charsWritten)
#if NET9_0_OR_GREATER
        => Convert.TryToHexString(source, destination, out charsWritten);
#else
    {
        var hexString = ConvertPolyfill.ToHexString(source);
        if (hexString.TryCopyTo(destination))
        {
            charsWritten = hexString.Length;
            return true;
        }

        charsWritten = 0;
        return false;
    }
#endif

    /// <summary>
    /// Converts a span of 8-bit unsigned integers to its equivalent span representation that is encoded with lowercase hex characters.
    /// </summary>
    //Link: https://learn.microsoft.com/en-us/dotnet/api/system.convert.trytohexstringlower
    public static bool TryToHexStringLower(ReadOnlySpan<byte> source, Span<char> destination, out int charsWritten)
#if NET9_0_OR_GREATER
        => Convert.TryToHexStringLower(source, destination, out charsWritten);
#else
    {
        var hexString = ConvertPolyfill.ToHexStringLower(source);
        if (hexString.TryCopyTo(destination))
        {
            charsWritten = hexString.Length;
            return true;
        }

        charsWritten = 0;
        return false;
    }
#endif


#endif
}